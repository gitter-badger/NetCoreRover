name: publish nugets
on:
  push:
    branches:
      #- develop
      - 15_create_github_action_to_build_nuget_packages
jobs:
  publish:
    name: list on nuget
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2

      # Required for a specific dotnet version that doesn't come with ubuntu-latest / windows-latest
      # Visit bit.ly/2synnZl to see the list of SDKs that are pre-installed with ubuntu-latest / windows-latest
      - name: Setup dotnet
        uses: actions/setup-dotnet@v1
        with:
          dotnet-version: 2.2.105
      
      # Publish
      - name: Push to GitHub Packages
        run: dotnet nuget push src/Robot.MessageBus/bin/Debug/*.nupkg --source "https://nuget.pkg.github.com/nahueltaibo/index.json" --userName nahueltaibo --password ${{ secrets.GitHubToken }}
